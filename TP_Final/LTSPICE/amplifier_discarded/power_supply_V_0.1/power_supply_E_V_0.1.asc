Version 4
SHEET 1 5728 948
WIRE 2736 -640 2368 -640
WIRE 2928 -640 2736 -640
WIRE 3648 -640 3008 -640
WIRE 2736 -576 2736 -640
WIRE -96 -544 -256 -544
WIRE 752 -544 -96 -544
WIRE 912 -544 752 -544
WIRE 1280 -544 1136 -544
WIRE 1376 -544 1280 -544
WIRE 1696 -544 1376 -544
WIRE 1280 -512 1280 -544
WIRE 1376 -512 1376 -544
WIRE 2368 -512 2368 -640
WIRE -256 -496 -256 -544
WIRE 752 -496 752 -544
WIRE 912 -496 912 -544
WIRE 2528 -480 2464 -480
WIRE 1696 -448 1696 -544
WIRE 1872 -448 1696 -448
WIRE 2112 -448 1872 -448
WIRE 2304 -448 2112 -448
WIRE 2464 -448 2448 -448
WIRE 2528 -448 2528 -480
WIRE 2528 -448 2464 -448
WIRE 2736 -448 2736 -496
WIRE 2736 -448 2528 -448
WIRE 3040 -448 2736 -448
WIRE 3264 -448 3200 -448
WIRE 3264 -416 3264 -448
WIRE 3264 -416 3200 -416
WIRE 3328 -416 3264 -416
WIRE 3488 -416 3328 -416
WIRE 3648 -416 3648 -640
WIRE 3648 -416 3488 -416
WIRE 3984 -416 3648 -416
WIRE 912 -384 912 -432
WIRE 1136 -384 1136 -544
WIRE 1136 -384 912 -384
WIRE 1280 -384 1280 -448
WIRE 1280 -384 1232 -384
WIRE 1376 -384 1376 -448
WIRE 1376 -384 1280 -384
WIRE 3488 -368 3488 -416
WIRE -256 -352 -256 -416
WIRE -96 -352 -256 -352
WIRE 80 -352 -96 -352
WIRE 1232 -352 1232 -384
WIRE 1280 -352 1280 -384
WIRE 1376 -352 1376 -384
WIRE 3328 -352 3328 -416
WIRE 752 -336 752 -432
WIRE 1136 -336 752 -336
WIRE -256 -304 -256 -352
WIRE 80 -304 80 -352
WIRE 752 -304 752 -336
WIRE 912 -304 912 -384
WIRE 1872 -304 1872 -448
WIRE 2736 -272 2736 -448
WIRE 3984 -272 3984 -416
WIRE 1136 -224 1136 -336
WIRE 1280 -224 1280 -288
WIRE 1280 -224 1136 -224
WIRE 1376 -224 1376 -288
WIRE 1376 -224 1280 -224
WIRE 1696 -224 1376 -224
WIRE 2112 -224 2112 -448
WIRE 3104 -224 3104 -384
WIRE 3232 -224 3104 -224
WIRE 3328 -224 3328 -272
WIRE 3328 -224 3232 -224
WIRE 3488 -224 3488 -304
WIRE 3488 -224 3328 -224
WIRE 3648 -192 3648 -416
WIRE -256 -176 -256 -224
WIRE -96 -176 -256 -176
WIRE 752 -176 752 -240
WIRE 752 -176 -96 -176
WIRE 912 -176 912 -240
WIRE 912 -176 752 -176
WIRE 3104 -176 3104 -224
WIRE 3232 -176 3232 -224
WIRE 1872 -80 1872 -224
WIRE 2112 -80 2112 -160
WIRE 3648 -48 3648 -128
WIRE 3984 -48 3984 -192
WIRE 2736 -32 2736 -208
WIRE 3104 -32 3104 -96
WIRE 3232 -32 3232 -112
WIRE 2464 112 2096 112
WIRE 2848 112 2560 112
WIRE 1696 256 1696 -224
WIRE 2096 256 2096 112
WIRE 2096 256 1696 256
WIRE 2288 256 2096 256
WIRE 2432 256 2384 256
WIRE 2512 256 2512 176
WIRE 2512 256 2432 256
WIRE 2592 256 2512 256
WIRE 2848 256 2848 112
WIRE 2848 256 2672 256
WIRE 2432 288 2432 256
WIRE 2336 352 2336 320
WIRE 2432 352 2336 352
WIRE 2336 368 2336 352
WIRE 2096 512 2096 256
WIRE 2192 512 2096 512
WIRE 2336 512 2336 448
WIRE 2336 512 2272 512
WIRE 2400 512 2336 512
WIRE 2624 512 2560 512
WIRE 2624 544 2624 512
WIRE 2688 544 2624 544
WIRE 2848 544 2848 256
WIRE 2848 544 2688 544
WIRE 3008 544 2848 544
WIRE 3200 544 3008 544
WIRE 2848 592 2848 544
WIRE 2688 608 2688 544
WIRE 2096 688 2096 512
WIRE 3200 688 3200 544
WIRE 2464 736 2464 576
WIRE 2592 736 2464 736
WIRE 2688 736 2688 688
WIRE 2688 736 2592 736
WIRE 2848 736 2848 656
WIRE 2848 736 2688 736
WIRE 3008 768 3008 544
WIRE 2464 784 2464 736
WIRE 2592 784 2592 736
WIRE 3008 912 3008 832
WIRE 3200 912 3200 768
WIRE 2096 928 2096 752
WIRE 2464 928 2464 864
WIRE 2592 928 2592 848
FLAG -96 -544 VLIN_1
FLAG -96 -176 VLIN_2
FLAG -96 -352 VLIN_N
FLAG 80 -304 0
FLAG 1376 -224 V-
FLAG 1376 -544 V+
FLAG 1232 -352 0
FLAG 3104 -32 0
FLAG 3232 -32 0
FLAG 3648 -48 0
FLAG 2736 -32 0
FLAG 3648 -416 vpreg
FLAG 2464 928 0
FLAG 2592 928 0
FLAG 3008 912 0
FLAG 3200 912 0
FLAG 2096 928 0
FLAG 3008 544 vnreg
FLAG 2112 -80 0
FLAG 3984 -48 0
FLAG 2736 -448 mid
FLAG 1872 -80 0
SYMBOL voltage -256 -512 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 51 53 Left 2
SYMATTR InstName VLIN_1
SYMATTR Value SINE(0 {VinPeak} 50)
SYMBOL diode 896 -496 R0
SYMATTR InstName D1
SYMATTR Value 1N5408
SYMBOL diode 896 -240 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N5408
SYMBOL polcap 1264 -512 R0
WINDOW 0 -116 27 Left 2
WINDOW 3 24 56 Left 2
SYMATTR InstName C_F1_P
SYMATTR Value 10000µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=35 Irms=1.45 Rser=0.044 Lser=0 mfg="Nichicon" pn="UPR1V222MRH" type="Al electrolytic"
SYMBOL cap 1360 -512 R0
WINDOW 0 50 27 Left 2
SYMATTR InstName C_F2_P
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=4 Irms=1.62 Rser=0.0464862 Lser=0 mfg="KEMET" pn="C0402C104K7PAC" type="X5R"
SYMBOL diode 768 -432 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N5408
SYMBOL diode 768 -304 M0
SYMATTR InstName D4
SYMATTR Value 1N5408
SYMBOL voltage -256 -320 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 46 51 Left 2
SYMATTR InstName VLIN_2
SYMATTR Value SINE(0 {VinPeak} 50)
SYMBOL polcap 1264 -352 R0
WINDOW 0 -116 27 Left 2
WINDOW 3 24 56 Left 2
SYMATTR InstName C_F1_N
SYMATTR Value 4700µ
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=35 Irms=1.45 Rser=0.044 Lser=0 mfg="Nichicon" pn="UPR1V222MRH" type="Al electrolytic"
SYMBOL cap 1360 -352 R0
WINDOW 0 50 27 Left 2
SYMATTR InstName C_F2_N
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=4 Irms=1.62 Rser=0.0464862 Lser=0 mfg="KEMET" pn="C0402C104K7PAC" type="X5R"
SYMBOL LM317_TRANS 3120 -432 R0
WINDOW 3 91 53 Top 2
SYMATTR InstName U1
SYMBOL diode 3504 -304 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value 1N4007
SYMBOL res 3312 -368 R0
SYMATTR InstName R1
SYMATTR Value 240
SYMBOL res 3088 -192 R0
SYMATTR InstName R2
SYMATTR Value 7.45k
SYMBOL polcap 3632 -192 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL polcap 2720 -272 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL diode 2864 592 M0
SYMATTR InstName D6
SYMATTR Value 1N4007
SYMBOL res 2672 592 R0
SYMATTR InstName R7
SYMATTR Value 120
SYMBOL polcap 2576 848 M180
WINDOW 0 24 57 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL res 2448 768 R0
SYMATTR InstName R8
SYMATTR Value 3.336k
SYMBOL res 2288 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 22
SYMBOL polcap 2992 832 M180
WINDOW 0 24 57 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 470µ
SYMBOL res 3184 672 R0
SYMATTR InstName R10
SYMATTR Value 18
SYMBOL res 2320 352 R0
SYMATTR InstName R11
SYMATTR Value 5k
SYMBOL res 2688 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 500
SYMBOL pnp 2464 176 R270
SYMATTR InstName Q3
SYMATTR Value TIP42C
SYMBOL npn 2384 320 M270
SYMATTR InstName Q4
SYMATTR Value BC548B
SYMBOL polcap 2080 752 M180
WINDOW 0 24 57 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C7
SYMATTR Value 10µ
SYMBOL cap 2416 288 R0
SYMATTR InstName C8
SYMATTR Value 300n
SYMBOL LM337_N_TRANS 2480 528 R0
SYMATTR InstName U3
SYMBOL LM317_TRANS 2384 -464 M180
WINDOW 3 91 53 Top 2
SYMATTR InstName U2
SYMBOL res 2720 -592 R0
SYMATTR InstName R3
SYMATTR Value 240
SYMBOL res 3024 -656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 720
SYMBOL res 3968 -288 R0
SYMATTR InstName RRL
SYMATTR Value 400
SYMBOL cap 3216 -176 R0
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL cap 2096 -224 R0
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMBOL res 1856 -320 R0
SYMATTR InstName RUL
SYMATTR Value 35
TEXT -968 -344 Left 6 ;From transformer
TEXT 3912 -1232 Left 2 !.tran 0 40m 0 0.1m
TEXT 3912 -1528 Left 2 !.INCLUDE "1N4007.lib"
TEXT 3912 -1488 Left 2 !.INCLUDE "1N5817.lib"
TEXT 3912 -1448 Left 2 !.INCLUDE "1N5822.lib"
TEXT 3912 -1296 Left 2 !.model sw1 sw(Ron=1m)
TEXT 4488 -1720 Left 4 ;Directives
TEXT 3912 -1408 Left 2 !.INCLUDE "1N5408.lib"
TEXT -744 -520 Left 2 !.param VinEff=32.72
TEXT -744 -472 Left 2 !.param VinPeak=SQRT(2)*{VinEff}
TEXT 4232 -1528 Left 2 !.INCLUDE "BC548B.lib"
TEXT 4232 -1496 Left 2 !.INCLUDE "BC558B.lib"
TEXT 4232 -1456 Left 2 !.INCLUDE "TIP41C.lib"
TEXT 4232 -1416 Left 2 !.INCLUDE "TIP42C.lib"
RECTANGLE Normal 4688 -1136 3824 -1696 3
