Version 4
SHEET 1 4372 1548
WIRE 3728 -480 3728 -512
WIRE 3760 -480 3728 -480
WIRE 3904 -480 3904 -512
WIRE 3904 -480 3872 -480
WIRE 3728 -448 3728 -480
WIRE 3904 -448 3904 -480
WIRE 1856 -64 1808 -64
WIRE 1968 -64 1920 -64
WIRE 1376 16 1312 16
WIRE 1472 16 1440 16
WIRE 1504 16 1472 16
WIRE 1600 16 1584 16
WIRE 1696 16 1600 16
WIRE 1808 32 1808 -64
WIRE 1808 32 1760 32
WIRE 1856 32 1808 32
WIRE 1968 32 1968 -64
WIRE 1968 32 1920 32
WIRE 2512 32 1968 32
WIRE 1696 48 1648 48
WIRE 1808 48 1808 32
WIRE 1968 48 1968 32
WIRE 1472 96 1472 16
WIRE 1600 96 1600 16
WIRE 1808 144 1808 128
WIRE 1968 144 1968 128
WIRE 2000 144 1968 144
WIRE 2096 144 2064 144
WIRE 1600 176 1600 160
WIRE 1312 192 1312 16
WIRE 1968 208 1968 144
WIRE 2512 208 2512 96
WIRE 1472 240 1472 176
WIRE 1504 240 1472 240
WIRE 1648 240 1648 48
WIRE 1648 240 1584 240
WIRE 1680 240 1648 240
WIRE 1808 240 1808 224
WIRE 1808 240 1760 240
WIRE 2096 256 2096 144
WIRE 2096 256 2016 256
WIRE 2112 256 2096 256
WIRE 2208 256 2192 256
WIRE 2464 256 2208 256
WIRE 1312 384 1312 272
WIRE 1472 384 1472 240
WIRE 1968 384 1968 288
WIRE 2000 384 1968 384
WIRE 2096 384 2096 256
WIRE 2096 384 2064 384
WIRE 2208 384 2208 256
WIRE 1968 416 1968 384
WIRE 2288 432 2256 432
WIRE 2512 432 2512 288
WIRE 1968 544 1968 496
WIRE 2512 544 2512 496
WIRE 2208 560 2208 464
WIRE 2880 688 2656 688
WIRE 3072 688 2944 688
WIRE 3072 704 3072 688
WIRE 3072 800 3072 704
WIRE 3072 1008 3072 880
FLAG 1312 384 0
FLAG 1968 544 0
FLAG 1472 384 0
FLAG 1728 64 VccL
FLAG 1728 0 VssL
FLAG 1600 176 0
FLAG 2208 560 0
FLAG 2512 544 0
FLAG 2288 432 out_etapa1
FLAG 1312 16 in
FLAG 3072 1008 0
FLAG 3072 704 out
FLAG 2656 688 out_etapa1
FLAG 3760 -480 0
FLAG 3872 -480 0
FLAG 3904 -592 VccH
FLAG 3728 -592 VccL
FLAG 3904 -368 VssH
FLAG 3728 -368 VssL
SYMBOL polcap 1376 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C16
SYMATTR Value 1µ
SYMBOL polcap 1856 48 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C18
SYMATTR Value 1µ
SYMBOL res 1600 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 1k
SYMBOL res 1456 192 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R22
SYMATTR Value 100k
SYMBOL res 1488 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R24
SYMATTR Value 77.5k
SYMBOL res 1664 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R25
SYMATTR Value 1Meg
SYMBOL res 1952 32 R0
SYMATTR InstName R28
SYMATTR Value 10k
SYMBOL res 1952 400 R0
SYMATTR InstName R29
SYMATTR Value 1k
SYMBOL res 2208 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 1k
SYMBOL voltage 1312 176 R0
WINDOW 123 -250 143 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -253 101 Left 2
SYMATTR Value2 AC {VPin}
SYMATTR Value SINE(0 {VPin} {freq})
SYMATTR InstName Vs
SYMBOL Opamps\\opamp2 1728 96 M180
SYMATTR InstName U1
SYMATTR Value TL072
SYMATTR SpiceModel TL072
SYMBOL res 1792 128 R0
SYMATTR InstName R26
SYMATTR Value 220k
SYMBOL cap 2496 496 M180
WINDOW 0 24 56 Left 2
WINDOW 3 36 18 Left 2
SYMATTR InstName C23
SYMATTR Value 22n
SYMBOL cap 2000 128 M90
WINDOW 0 -3 61 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C20
SYMATTR Value 22n
SYMBOL cap 2000 368 M90
WINDOW 0 -3 61 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C21
SYMATTR Value 220n
SYMBOL cap 1584 160 M180
WINDOW 0 24 56 Left 2
WINDOW 3 36 18 Left 2
SYMATTR InstName C17
SYMATTR Value 100p
SYMBOL cap 2496 96 M180
WINDOW 0 24 56 Left 2
WINDOW 3 36 18 Left 2
SYMATTR InstName C22
SYMATTR Value 2.2n
SYMBOL potentiometer_standard 1952 192 R0
WINDOW 3 48 110 Left 2
WINDOW 39 48 112 Invisible 2
SYMATTR Value Rtot=100K wiper=0.17
SYMATTR SpiceLine Rtap=1E-5 tap=0.5
SYMATTR InstName RV3
SYMBOL potentiometer_standard 2192 368 R0
WINDOW 3 28 118 Left 2
WINDOW 39 48 112 Invisible 2
SYMATTR Value Rtot=100K wiper=1
SYMATTR SpiceLine Rtap=1E-5 tap=0.5
SYMATTR InstName RV4
SYMBOL potentiometer_standard 2528 192 M0
WINDOW 3 -47 105 Left 2
WINDOW 39 48 112 Invisible 2
SYMATTR Value Rtot=100K wiper=0.07
SYMATTR SpiceLine Rtap=1E-5 tap=0.5
SYMATTR InstName RV5
SYMBOL res 3056 896 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RL
SYMATTR Value {RL}
SYMBOL polcap 2880 672 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 22µ
SYMBOL res 1792 32 R0
SYMATTR InstName R27
SYMATTR Value 100k
SYMBOL polcap 1856 -48 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C19
SYMATTR Value 1µ
SYMBOL voltage 3728 -608 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {LH}
SYMBOL voltage 3728 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {LH}
SYMBOL voltage 3904 -608 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {VH}
SYMBOL voltage 3904 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value {VH}
TEXT 2024 -32 Left 2 ;En esta etapa entra directo la salida del celular, que segun lo que medi son como mucho 0.7V pico.\nDeberia tener una ganancia (regulada por R24 y R25) tal que a la salida hayan aproximadamente 1V.
TEXT 2592 248 Left 4 ;Trebel
TEXT 2056 472 Left 4 ;Volume
TEXT 1832 304 Left 4 ;Bass
TEXT 3968 -120 Left 2 !.lib TL072.lib
TEXT 3320 208 Left 2 !.fourier {freq} 30 4 V(out)
TEXT 3320 240 Left 2 !.option plotwinsize=0
TEXT 3320 368 Left 2 !.meas TRAN Vrms RMS V(out) FROM {datastart}
TEXT 3320 400 Left 2 !.meas TRAN Pout AVG V(out)*I(RL) FROM {datastart}
TEXT 3320 272 Left 2 !.option numdgt=9
TEXT 3320 336 Left 2 !.meas TRAN Vout_max MAX V(out)
TEXT 3320 304 Left 2 !.param datastart=+{startsigndelay}-{startdelay}
TEXT 3320 -144 Left 2 ;.tran 0 {datastop} {startdelay} {datastep}
TEXT 3320 -48 Left 2 !.param freq=10k
TEXT 3320 -120 Left 2 ;.op
TEXT 3320 -96 Left 2 !.ac dec 10000 0.01 10G
TEXT 3320 -24 Left 2 !.param VPin=700m
TEXT 3320 0 Left 2 !.param RL=22k
TEXT 3320 24 Left 2 !.param startdelay=4m
TEXT 3320 48 Left 2 !.param startsigndelay=5m
TEXT 3320 72 Left 2 !.param dataduration=10m
TEXT 3320 -192 Left 2 !.param datastop=+{dataduration}+{startdelay}
TEXT 3320 96 Left 2 !.param datastep=0.0001m
TEXT 3968 -152 Left 2 !.lib NE5532.lib
TEXT 3736 -808 Left 2 !.param VH=35
TEXT 3736 -768 Left 2 !.param LH=15
TEXT 1728 344 Left 3 ;Min Bass 0.17
TEXT 2592 288 Left 3 ;Min Trebel 0.07
TEXT 2240 528 Left 3 ;Max Vol (tone) 0.1668476
LINE Normal 3920 -176 3312 -176
LINE Normal 3920 -176 3920 -176 2
LINE Normal 3920 -208 3920 -208 2
RECTANGLE Normal 4288 432 3936 -208 2
RECTANGLE Normal 3920 432 3312 192 3
RECTANGLE Normal 3920 -80 3312 -208
RECTANGLE Normal 3920 160 3312 -64 3
RECTANGLE Normal 4288 432 3936 -208 2
RECTANGLE Normal 4288 -224 3552 -912 3
